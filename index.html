<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School of Adults</title>
    <meta name="description" content="A modern, modular guide to managing every aspect of adult life.">
    <meta name="theme-color" content="#1a1a1a">
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #e5e7eb;
            --theme-color-1: #374151;
            --theme-color-2: #4f46e5;
        }
        html { color-scheme: dark; }
        body { 
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.5s ease;
        }
        .tile {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            transform: rotate(var(--rotate, 0deg));
        }
        .tile:hover {
            transform: translateY(-10px) scale(1.05) rotate(var(--rotate-hover, 0deg));
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }
        .list-item-do::before { content: '‚úì'; color: var(--theme-color-2); margin-right: 0.75rem; font-weight: bold; }
        .list-item-dont::before { content: '‚úó'; color: #ef4444; margin-right: 0.75rem; font-weight: bold; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.1); }
        ::-webkit-scrollbar-thumb { background: var(--theme-color-2); border-radius: 4px; }
        #content-display { display: none; }
        .nav-sidebar {
            transition: transform 0.3s ease-in-out;
        }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        
        @media (max-width: 1024px) {
            .nav-sidebar {
                transform: translateX(100%);
            }
            .nav-sidebar.open {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body class="text-gray-200">
    <div id="app" class="relative min-h-screen flex">
        <!-- Main Content Area -->
        <div class="flex-1 transition-all duration-300">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Header -->
                <header class="flex items-center justify-between pb-8">
                     <div class="flex items-center space-x-3" id="header-content">
                         <span class="text-3xl">üéì</span>
                        <h1 class="text-3xl font-bold text-white">School of Adults</h1>
                    </div>
                    <button id="nav-toggle" class="lg:hidden z-50 p-2 rounded-md hover:bg-white/10">
                        <i data-feather="menu" class="w-7 h-7"></i>
                    </button>
                </header>
                
                <main>
                    <!-- Home Grid -->
                    <div id="home-grid">
                        <!-- Tiles will be injected here -->
                    </div>

                    <!-- Content Display -->
                    <div id="content-display">
                        <!-- Topic content will be injected here -->
                    </div>
                </main>
            </div>
        </div>
        
        <!-- Right Navigation Sidebar -->
        <nav id="nav-sidebar" class="nav-sidebar fixed top-0 right-0 h-full w-72 bg-black/30 backdrop-blur-lg border-l border-white/10 z-40 lg:relative lg:w-72 lg:translate-x-0 lg:flex-shrink-0 flex flex-col">
             <div class="p-8 overflow-y-auto flex-1">
                <h2 class="text-2xl font-bold mb-6 text-white">Topics</h2>
                <div id="nav-links" class="space-y-2">
                    <!-- Nav links injected here -->
                </div>
            </div>
        </nav>
         <!-- Sidebar Overlay -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden"></div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const root = document.documentElement;
        const homeGrid = document.getElementById('home-grid');
        const contentDisplay = document.getElementById('content-display');
        const headerContent = document.getElementById('header-content');
        const navSidebar = document.getElementById('nav-sidebar');
        const navToggle = document.getElementById('nav-toggle');
        const navLinksContainer = document.getElementById('nav-links');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        const topics = {
            health: { 
                title: "Health & Wellness", 
                icon: "‚ù§Ô∏è", 
                color1: "#1f2937", 
                color2: "#ef4444",
                subtopics: {
                    food: { title: "Food", icon: "ü•ó", file: "health-food.json" },
                    exercise: { title: "Exercise", icon: "üèãÔ∏è", file: "health-exercise.json" },
                    healthCheckUp: { title: "Health Check Up", icon: "ü©∫", file: "health-healthcheckup.json" },
                    mentalHealth: { title: "Mental Health", icon: "üß†", file: "health-mentalhealth.json" },
                    period: { title: "Period Health", icon: "ü©∏", file: "health-period.json" },
                }
            },
            wealth: { 
                title: "Wealth & Finance", 
                icon: "üí∞",
                color1: "#1e3a8a",
                color2: "#3b82f6",
                subtopics: {
                    generate: { title: "Generate", icon: "üìà", file: "wealth-generate.json" },
                    invest: { title: "Invest", icon: "üè¶", file: "wealth-invest.json" },
                    insurance: { title: "Insurance", icon: "üõ°Ô∏è", file: "wealth-insurance.json" },
                    spends: { title: "Spends", icon: "üí∏", file: "wealth-spends.json" },
                    loans: { title: "Loans", icon: "üßæ", file: "wealth-loans.json" },
                }
            },
            career: { 
                title: "Career & Ambition", 
                icon: "üöÄ", 
                color1: "#4a044e", 
                color2: "#a21caf",
                subtopics: {
                    choosing: { title: "Choosing Career", icon: "ü§î", file: "career-choosing.json" },
                    jobsearch: { title: "Job Search", icon: "üíº", file: "career-jobsearch.json" },
                    ladder: { title: "Career Ladder", icon: "üßó", file: "career-ladder.json" },
                    resignation: { title: "Resignation", icon: "üëã", file: "career-resignation.json" },
                }
            },
            homeManagement: {
                title: "Home Management",
                icon: "üè°",
                color1: "#3f6212",
                color2: "#84cc16",
                subtopics: {
                    livingroom: { title: "Living Room", icon: "üõãÔ∏è", file: "home-livingroom.json" },
                    bedroom: { title: "Bedroom", icon: "üõèÔ∏è", file: "home-bedroom.json" },
                    kitchen: { title: "Kitchen", icon: "üç≥", file: "home-kitchen.json" },
                    garden: { title: "Garden", icon: "üå≥", file: "home-garden.json" },
                    bathroom: { title: "Bathroom", icon: "üõÅ", file: "home-bathroom.json" },
                }
            },
            travel: { 
                title: "Travel & Exploration", 
                icon: "‚úàÔ∏è", 
                color1: "#064e3b", 
                color2: "#10b981",
                subtopics: {
                    place: { title: "Place", icon: "üó∫Ô∏è", file: "travel-place.json" },
                    stay: { title: "Stay", icon: "üè®", file: "travel-stay.json" },
                    flight: { title: "Flight", icon: "‚úàÔ∏è", file: "travel-flight.json" },
                    train: { title: "Train", icon: "üöÜ", file: "travel-train.json" },
                    bus: { title: "Bus", icon: "üöå", file: "travel-bus.json" },
                    cab: { title: "Cab", icon: "üöï", file: "travel-cab.json" },
                    itinerary: { title: "Itinerary", icon: "üìù", file: "travel-itinerary.json" },
                    thingstocarry: { title: "Things to Carry", icon: "üéí", file: "travel-thingstocarry.json" },
                }
            },
            people: {
                title: "People & Relationships",
                icon: "üë•",
                color1: "#581c87",
                color2: "#a855f7",
                subtopics: {
                    self: { title: "Self", icon: "‚ù§Ô∏è‚Äçü©π", file: "people-self.json" },
                    parents: { title: "Parents", icon: "üë®‚Äçüë©‚Äçüëß", file: "people-parents.json" },
                    partner: { title: "Partner", icon: "üíû", file: "people-partner.json" },
                    kids: { title: "Kids", icon: "üë∂", file: "people-kids.json" },
                    friends: { title: "Friends", icon: "üßë‚Äçü§ù‚Äçüßë", file: "people-friends.json" },
                    relatives: { title: "Relatives", icon: "üë®‚Äçüë©‚Äçüëß‚Äçüë¶", file: "people-relatives.json" },
                    colleagues: { title: "Colleagues", icon: "üëî", file: "people-colleagues.json" },
                    enemy: { title: "Difficult People", icon: "üòí", file: "people-enemy.json" },
                }
            },
            lifeSkills: {
                title: "Essential Life Skills",
                icon: "üõ†Ô∏è",
                color1: "#854d0e",
                color2: "#f59e0b",
                subtopics: {
                    driving: { title: "Driving", icon: "üöó", file: "lifeskills-driving.json" },
                    swimming: { title: "Swimming", icon: "üèä", file: "lifeskills-swimming.json" },
                    decisionmaking: { title: "Decision Making", icon: "üß†", file: "lifeskills-decisionmaking.json" },
                    problemsolving: { title: "Problem Solving", icon: "üß©", file: "lifeskills-problemsolving.json" }
                }
            },
            lifeEvents: {
                title: "Major Life Events",
                icon: "üéâ",
                color1: "#0c4a6e",
                color2: "#0ea5e9",
                subtopics: {
                    buyinghouse: { title: "Buying House", icon: "üè†", file: "lifeevents-buyinghouse.json" },
                    gettingmarried: { title: "Getting Married", icon: "üíç", file: "lifeevents-gettingmarried.json" },
                    pregnancy: { title: "Pregnancy", icon: "ü§∞", file: "lifeevents-pregnancy.json" },
                    moving: { title: "Moving to a New City", icon: "üèôÔ∏è", file: "lifeevents-moving.json" }
                }
            },
            pets: {
                title: "Pet Care",
                icon: "üêæ",
                color1: "#6d28d9",
                color2: "#c084fc",
                subtopics: {
                    cats: { title: "Cats", icon: "üêà", file: "pets-cats.json" },
                    dogs: { title: "Dogs", icon: "üêï", file: "pets-dogs.json" }
                }
            },
            content: {
                title: "Content Consumption",
                icon: "üé¨",
                color1: "#0f766e",
                color2: "#14b8a6",
                subtopics: {
                    news: { title: "News", icon: "üì∞", file: "content-news.json" },
                    tvmovies: { title: "TV Shows & Movies", icon: "üéûÔ∏è", file: "content-tvmovies.json" },
                    songs: { title: "Songs", icon: "üéµ", file: "content-songs.json" },
                    books: { title: "Books", icon: "üìö", file: "content-books.json" },
                    games: { title: "Games", icon: "üéÆ", file: "content-games.json" }
                }
            },
            fashion: {
                title: "Fashion & Style",
                icon: "üëï",
                color1: "#831843",
                color2: "#e11d48",
                subtopics: {
                    men: { title: "Men", icon: "üë®", file: "fashion-men.json" },
                    women: { title: "Women", icon: "üë©", file: "fashion-women.json" },
                    kids: { title: "Kids", icon: "üëß", file: "fashion-kids.json" }
                }
            }
        };

        const defaultTheme = {
            bgColor: "#121212",
            color1: "#374151",
            color2: "#4f46e5"
        };
        
        const setTheme = (theme) => {
            root.style.setProperty('--bg-color', theme.bgColor);
            root.style.setProperty('--theme-color-1', theme.color1);
            root.style.setProperty('--theme-color-2', theme.color2);
        };

        const updateHeader = (title, icon = 'üéì') => {
            headerContent.innerHTML = `
                <span class="text-3xl">${icon}</span>
                <h1 class="text-3xl font-bold text-white">${title}</h1>
            `;
        };
        
        const renderNavLinks = () => {
            let linksHtml = '<a href="#home" class="nav-link block font-semibold text-lg py-2 px-4 rounded-lg hover:bg-white/10" data-path="home">üè† Home</a>';
            for (const key in topics) {
                const topic = topics[key];
                if (topic.subtopics) {
                    linksHtml += `
                        <details class="group">
                            <summary class="flex items-center justify-between font-semibold text-lg py-2 px-4 rounded-lg hover:bg-white/10 cursor-pointer">
                                <a href="#${key}" class="flex items-center flex-1" data-path="${key}">
                                    <span class="mr-3">${topic.icon}</span>
                                    <span>${topic.title}</span>
                                </a>
                                <i data-feather="chevron-down" class="ml-2 h-5 w-5 group-open:rotate-180 transition-transform flex-shrink-0"></i>
                            </summary>
                            <div class="pl-8 border-l-2 border-white/10 ml-6 mt-1 space-y-1">
                                ${Object.entries(topic.subtopics).map(([subKey, subTopic]) => `
                                    <a href="#${key}-${subKey}" class="nav-link flex items-center font-medium text-base py-1 px-2 rounded-lg hover:bg-white/10 text-gray-300" data-path="${key}-${subKey}">
                                        <span class="mr-2">${subTopic.icon}</span>
                                        <span>${subTopic.title}</span>
                                    </a>
                                `).join('')}
                            </div>
                        </details>
                    `;
                } else {
                    linksHtml += `<a href="#${key}" class="nav-link block font-semibold text-lg py-2 px-4 rounded-lg hover:bg-white/10" data-path="${key}">${topic.icon} ${topic.title}</a>`;
                }
            }
            navLinksContainer.innerHTML = linksHtml;
            feather.replace();
        };

        const renderHomeGrid = () => {
            setTheme(defaultTheme);
            homeGrid.innerHTML = '';
            homeGrid.style.display = 'grid';
            contentDisplay.style.display = 'none';
            updateHeader("School of Adults");

            homeGrid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8';
            let rotation = -2;

            for (const key in topics) {
                const item = topics[key];
                const tile = document.createElement('a');
                const path = item.file ? key : key;
                tile.href = `#${path}`;
                tile.className = 'tile p-8 rounded-2xl flex flex-col items-center justify-center text-center text-white shadow-lg';
                tile.style.backgroundColor = item.color1;
                tile.style.setProperty('--rotate', `${rotation}deg`);
                tile.style.setProperty('--rotate-hover', `${rotation > 0 ? rotation - 1 : rotation + 1}deg`);
                
                tile.innerHTML = `
                    <span class="text-5xl mb-4">${item.icon}</span>
                    <h3 class="text-2xl font-bold">${item.title}</h3>
                `;
                homeGrid.appendChild(tile);
                rotation = (rotation + 4) * -1;
            }
        };

        const renderSubtopicGrid = (parentKey) => {
            const parentTopic = topics[parentKey];
            setTheme({bgColor: parentTopic.color1, color1: parentTopic.color1, color2: parentTopic.color2});
            homeGrid.innerHTML = '';
            homeGrid.style.display = 'grid';
            contentDisplay.style.display = 'none';
            updateHeader(parentTopic.title, parentTopic.icon);

            homeGrid.className = 'grid grid-cols-2 md:grid-cols-3 gap-6';

            for (const key in parentTopic.subtopics) {
                const item = parentTopic.subtopics[key];
                const tile = document.createElement('a');
                tile.href = `#${parentKey}-${key}`;
                tile.className = 'tile p-6 rounded-xl flex flex-col items-center justify-center text-center border-2';
                tile.style.borderColor = parentTopic.color2;
                tile.style.backgroundColor = 'rgba(0,0,0,0.2)';
                
                tile.innerHTML = `
                    <span class="text-4xl mb-3">${item.icon}</span>
                    <h3 class="font-semibold text-white text-lg">${item.title}</h3>`;
                homeGrid.appendChild(tile);
            }
        };

        const renderTopicContent = async (filePath, theme, topicItem) => {
            setTheme({bgColor: theme.color1, color1: theme.color1, color2: theme.color2});
            try {
                const response = await fetch(filePath);
                if (!response.ok) throw new Error(`File not found: ${filePath}`);
                const data = await response.json();

                homeGrid.style.display = 'none';
                contentDisplay.style.display = 'block';
                updateHeader(data.title, topicItem.icon);
                
                contentDisplay.innerHTML = `
                    <div class="animate-fade-in bg-black/20 p-6 sm:p-8 rounded-2xl">
                        <p class="text-gray-300 text-lg mb-8 max-w-3xl">${data.description}</p>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="space-y-6">
                                <div class="p-6 rounded-xl bg-black/20 border border-white/10">
                                    <h3 class="text-xl font-semibold mb-4 text-white flex items-center"><i data-feather="book-open" class="mr-2 h-5 w-5"></i>Key Information</h3>
                                    <ul class="space-y-2 text-gray-300">
                                        ${data.sentences.map(item => `<li class="flex items-start"><span style="color: ${theme.color2}" class="mr-2 mt-1">‚óÜ</span><span>${item}</span></li>`).join('')}
                                    </ul>
                                </div>
                                <div class="p-6 rounded-xl bg-black/20 border border-white/10">
                                    <h3 class="text-xl font-semibold mb-4 text-white flex items-center"><i data-feather="link" class="mr-2 h-5 w-5"></i>Websites</h3>
                                    <div class="space-y-3">
                                        ${data.websites.map(res => `
                                            <a href="${res.url}" target="_blank" rel="noopener noreferrer" class="block bg-black/20 p-3 rounded-lg hover:bg-black/40 transition-colors border border-white/10">
                                                <p class="font-medium" style="color: ${theme.color2}">${res.name}</p>
                                            </a>`).join('')}
                                    </div>
                                </div>
                            </div>
                            <div class="space-y-6">
                                <div class="p-6 rounded-xl bg-black/20 border border-white/10">
                                    <h3 class="text-xl font-semibold mb-4 text-green-400 flex items-center"><i data-feather="check-circle" class="mr-2 h-5 w-5"></i>Do's</h3>
                                    <ul class="space-y-3 text-gray-300">
                                        ${data.dos.map(item => `<li class="list-item-do">${item}</li>`).join('')}
                                    </ul>
                                </div>
                                <div class="p-6 rounded-xl bg-black/20 border border-white/10">
                                    <h3 class="text-xl font-semibold mb-4 text-red-400 flex items-center"><i data-feather="x-circle" class="mr-2 h-5 w-5"></i>Don'ts</h3>
                                    <ul class="space-y-3 text-gray-300">
                                        ${data.donts.map(item => `<li class="list-item-dont">${item}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>`;
                feather.replace();
                window.scrollTo(0, 0);

            } catch (error) {
                console.error("Error loading topic:", error);
                contentDisplay.innerHTML = `<p class="text-red-400">Could not load content. Please try again.</p>`;
            }
        };
        
        const handleNavigation = (hash) => {
            const cleanHash = hash.replace('#', '');
            const [parentKey, childKey] = cleanHash.split('-');

            if (!cleanHash || cleanHash === 'home') {
                renderHomeGrid();
            } else if (topics[parentKey] && topics[parentKey].subtopics && !childKey) {
                renderSubtopicGrid(parentKey);
            } else {
                let topicItem, theme, filePath;
                if (childKey) {
                    topicItem = topics[parentKey]?.subtopics[childKey];
                    theme = topics[parentKey];
                    filePath = topicItem?.file;
                } else {
                    topicItem = topics[parentKey];
                    theme = topicItem;
                    filePath = topicItem?.file;
                }
                
                if (filePath) {
                    renderTopicContent(filePath, theme, topicItem);
                } else {
                    renderHomeGrid(); // Fallback to home
                }
            }
             // Close sidebar on nav
            if(navSidebar.classList.contains('open')) {
                navSidebar.classList.remove('open');
                sidebarOverlay.classList.add('hidden');
            }
        };

        const handleNavClick = (e) => {
            const link = e.target.closest('a');
            if (link) {
                e.preventDefault();
                const path = link.getAttribute('href');
                history.pushState({ path }, '', path);
                handleNavigation(path);
            }
        };

        // Event Listeners
        homeGrid.addEventListener('click', handleNavClick);
        navLinksContainer.addEventListener('click', handleNavClick);

        navToggle.addEventListener('click', () => {
            navSidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('hidden');
        });
        sidebarOverlay.addEventListener('click', () => {
            navSidebar.classList.remove('open');
            sidebarOverlay.classList.add('hidden');
        });
        
        window.addEventListener('popstate', () => {
             handleNavigation(window.location.hash);
        });

        // Initial Load
        renderNavLinks();
        handleNavigation(window.location.hash);
        feather.replace();
    });
    </script>
        <script>
            // Check if service workers are supported by the browser
            if ('serviceWorker' in navigator) {
                // Register the service worker when the window loads
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js') // Adjust path if sw.js is not in the root
                        .then(registration => {
                            console.log('Service Worker registered with scope:', registration.scope);
                        })
                        .catch(error => {
                            console.error('Service Worker registration failed:', error);
                        });
                });
            }
        </script>

    
</body>
</html>

